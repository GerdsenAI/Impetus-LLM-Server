<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GerdsenAI MLX Model Manager - Enhanced</title>
    <link rel="stylesheet" href="enhanced_styles.css">
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;500;600;700&family=SF+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="dark-theme">
    <div class="app-container">
        <!-- macOS Window Controls -->
        <div class="window-controls">
            <div class="traffic-lights">
                <div class="traffic-light close" onclick="window.close()"></div>
                <div class="traffic-light minimize" onclick="minimizeToTray()"></div>
                <div class="traffic-light maximize" onclick="toggleMaximize()"></div>
            </div>
        </div>

        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <div class="logo-text">
                        <h1>GerdsenAI</h1>
                        <span>MLX Model Manager</span>
                    </div>
                </div>
                <div class="header-status">
                    <div class="connection-status" id="connectionStatus">
                        <div class="status-dot connected"></div>
                        <span>Connected</span>
                    </div>
                    <div class="hardware-info" id="hardwareInfo">
                        <i class="fas fa-microchip"></i>
                        <span>Detecting...</span>
                    </div>
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search..." id="searchInput">
                    </div>
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Navigation Tabs -->
            <nav class="nav-tabs">
                <div class="tab-item active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </div>
                <div class="tab-item" data-tab="models">
                    <i class="fas fa-cube"></i>
                    <span>Models</span>
                </div>
                <div class="tab-item" data-tab="performance">
                    <i class="fas fa-chart-line"></i>
                    <span>Performance</span>
                </div>
                <div class="tab-item" data-tab="hardware">
                    <i class="fas fa-server"></i>
                    <span>Hardware</span>
                </div>
                <div class="tab-item" data-tab="optimization">
                    <i class="fas fa-magic"></i>
                    <span>Optimization</span>
                </div>
            </nav>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard">
                    <div class="dashboard-grid">
                        <!-- System Metrics Cards -->
                        <div class="metrics-grid">
                            <div class="metric-card cpu-usage">
                                <div class="metric-icon">
                                    <i class="fas fa-microchip"></i>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-label">CPU Usage</div>
                                    <div class="metric-value" id="cpuUsage">--</div>
                                    <div class="metric-trend" id="cpuTrend">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="metric-card memory-usage">
                                <div class="metric-icon">
                                    <i class="fas fa-memory"></i>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-label">Memory Used</div>
                                    <div class="metric-value" id="memoryUsage">--</div>
                                    <div class="metric-trend" id="memoryTrend">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="metric-card temperature">
                                <div class="metric-icon">
                                    <i class="fas fa-thermometer-half"></i>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-label">Temperature</div>
                                    <div class="metric-value" id="temperature">--</div>
                                    <div class="metric-trend" id="temperatureTrend">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                            </div>

                            <div class="metric-card loaded-models">
                                <div class="metric-icon">
                                    <i class="fas fa-cube"></i>
                                </div>
                                <div class="metric-content">
                                    <div class="metric-label">Loaded Models</div>
                                    <div class="metric-value" id="loadedModels">--</div>
                                    <div class="metric-trend" id="modelsTrend">
                                        <i class="fas fa-arrow-up"></i>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- System Overview -->
                        <div class="system-overview-card">
                            <div class="card-header">
                                <h2>System Overview</h2>
                                <div class="optimization-status" id="optimizationStatus">
                                    <div class="status-indicator optimized"></div>
                                    <span>Optimized</span>
                                </div>
                            </div>
                            <div class="system-details">
                                <div class="system-row">
                                    <span class="system-label">Apple Silicon Status</span>
                                    <span class="system-value" id="siliconStatus">Detecting...</span>
                                </div>
                                <div class="system-row">
                                    <span class="system-label">Neural Engine</span>
                                    <span class="system-value" id="neuralEngine">Available</span>
                                </div>
                                <div class="system-row">
                                    <span class="system-label">Metal GPU</span>
                                    <span class="system-value" id="metalGpu">Available</span>
                                </div>
                                <div class="system-row">
                                    <span class="system-label">Memory Usage</span>
                                    <div class="memory-bar">
                                        <div class="memory-progress" id="memoryProgress"></div>
                                        <span class="memory-text" id="memoryText">-- GB / -- GB</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CPU Core Usage -->
                        <div class="cpu-cores-card">
                            <div class="card-header">
                                <h2>CPU Core Usage</h2>
                                <div class="core-type-legend">
                                    <div class="legend-item">
                                        <div class="legend-color performance"></div>
                                        <span>Performance</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color efficiency"></div>
                                        <span>Efficiency</span>
                                    </div>
                                </div>
                            </div>
                            <div class="cpu-cores-grid" id="cpuCoresGrid">
                                <!-- CPU cores will be dynamically generated -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hardware Tab -->
                <div class="tab-content" id="hardware">
                    <div class="hardware-grid">
                        <!-- Apple Silicon Specifications -->
                        <div class="hardware-card apple-silicon-specs">
                            <div class="card-header">
                                <h2>Apple Silicon Specifications</h2>
                                <div class="chip-badge" id="chipBadge">
                                    <div class="chip-icon">
                                        <i class="fab fa-apple"></i>
                                    </div>
                                    <div class="chip-info">
                                        <div class="chip-name" id="chipName">Detecting...</div>
                                        <div class="chip-variant" id="chipVariant">--</div>
                                    </div>
                                </div>
                            </div>
                            <div class="specs-grid">
                                <div class="spec-item">
                                    <span class="spec-label">CPU Cores</span>
                                    <span class="spec-value" id="cpuCores">-- P + -- E</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">GPU Cores</span>
                                    <span class="spec-value" id="gpuCores">--</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">Neural Engine</span>
                                    <span class="spec-value" id="neuralEngineCores">-- cores</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">Memory</span>
                                    <span class="spec-value" id="unifiedMemory">-- GB Unified</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">Memory Bandwidth</span>
                                    <span class="spec-value" id="memoryBandwidth">-- GB/s</span>
                                </div>
                                <div class="spec-item">
                                    <span class="spec-label">Process Node</span>
                                    <span class="spec-value" id="processNode">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- Real-time Monitoring -->
                        <div class="hardware-card real-time-monitoring">
                            <div class="card-header">
                                <h2>Real-time Monitoring</h2>
                                <div class="monitoring-controls">
                                    <select id="monitoringMetric">
                                        <option value="cpu">CPU Frequency</option>
                                        <option value="gpu">GPU Utilization</option>
                                        <option value="memory">Memory Bandwidth</option>
                                        <option value="neural">Neural Engine</option>
                                    </select>
                                </div>
                            </div>
                            <div class="monitoring-chart">
                                <canvas id="realtimeChart"></canvas>
                            </div>
                            <div class="monitoring-stats">
                                <div class="stat-item">
                                    <span class="stat-label">Current</span>
                                    <span class="stat-value" id="currentStat">--</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Average</span>
                                    <span class="stat-value" id="averageStat">--</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Peak</span>
                                    <span class="stat-value" id="peakStat">--</span>
                                </div>
                            </div>
                        </div>

                        <!-- Memory Details -->
                        <div class="hardware-card memory-details">
                            <div class="card-header">
                                <h2>Memory Details</h2>
                                <div class="memory-pressure" id="memoryPressure">
                                    <div class="pressure-indicator normal"></div>
                                    <span>Normal</span>
                                </div>
                            </div>
                            <div class="memory-breakdown">
                                <div class="memory-bar-detailed">
                                    <div class="memory-segment used" id="memoryUsed"></div>
                                    <div class="memory-segment cached" id="memoryCached"></div>
                                    <div class="memory-segment free" id="memoryFree"></div>
                                </div>
                                <div class="memory-legend">
                                    <div class="legend-item">
                                        <div class="legend-color used"></div>
                                        <span>Used</span>
                                        <span class="legend-value" id="usedValue">-- GB</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color cached"></div>
                                        <span>Cached</span>
                                        <span class="legend-value" id="cachedValue">-- GB</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color free"></div>
                                        <span>Free</span>
                                        <span class="legend-value" id="freeValue">-- GB</span>
                                    </div>
                                </div>
                            </div>
                            <div class="memory-chart">
                                <canvas id="memoryChart"></canvas>
                            </div>
                        </div>

                        <!-- Framework Capabilities -->
                        <div class="hardware-card framework-capabilities">
                            <div class="card-header">
                                <h2>Framework Capabilities</h2>
                            </div>
                            <div class="frameworks-grid">
                                <div class="framework-item" id="coremlFramework">
                                    <div class="framework-icon">
                                        <i class="fab fa-apple"></i>
                                    </div>
                                    <div class="framework-info">
                                        <div class="framework-name">Core ML</div>
                                        <div class="framework-status">Checking...</div>
                                        <div class="framework-version">--</div>
                                    </div>
                                </div>
                                <div class="framework-item" id="mlxFramework">
                                    <div class="framework-icon">
                                        <i class="fas fa-bolt"></i>
                                    </div>
                                    <div class="framework-info">
                                        <div class="framework-name">MLX</div>
                                        <div class="framework-status">Checking...</div>
                                        <div class="framework-version">--</div>
                                    </div>
                                </div>
                                <div class="framework-item" id="metalFramework">
                                    <div class="framework-icon">
                                        <i class="fas fa-cube"></i>
                                    </div>
                                    <div class="framework-info">
                                        <div class="framework-name">Metal Performance Shaders</div>
                                        <div class="framework-status">Checking...</div>
                                        <div class="framework-version">--</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Models Tab -->
                <div class="tab-content" id="models">
                    <div class="models-container">
                        <div class="models-header">
                            <h2>Model Management</h2>
                            <div class="models-actions">
                                <button class="btn btn-secondary" id="downloadModelBtn">
                                    <i class="fas fa-download"></i>
                                    Download Model
                                </button>
                                <button class="btn btn-primary" id="addModelBtn">
                                    <i class="fas fa-plus"></i>
                                    Add Model
                                </button>
                            </div>
                        </div>

                        <!-- Model Drop Zone -->
                        <div class="model-drop-zone" id="modelDropZone">
                            <div class="drop-zone-content">
                                <div class="drop-zone-icon">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <h3>Drop Model Files Here</h3>
                                <p>Drag and drop .mlx, .gguf, .safetensors, or other model files</p>
                                <div class="supported-formats">
                                    <span class="format-tag">.mlx</span>
                                    <span class="format-tag">.gguf</span>
                                    <span class="format-tag">.safetensors</span>
                                    <span class="format-tag">.bin</span>
                                    <span class="format-tag">.mlpackage</span>
                                </div>
                                <button class="btn btn-secondary" onclick="document.getElementById('fileInput').click()">
                                    <i class="fas fa-folder-open"></i>
                                    Browse Files
                                </button>
                                <input type="file" id="fileInput" multiple accept=".mlx,.gguf,.safetensors,.bin,.mlpackage" style="display: none;">
                            </div>
                        </div>

                        <!-- Models List -->
                        <div class="models-list" id="modelsList">
                            <!-- Models will be dynamically populated -->
                        </div>
                    </div>
                </div>

                <!-- Performance Tab -->
                <div class="tab-content" id="performance">
                    <div class="performance-container">
                        <div class="performance-header">
                            <h2>Performance Analytics</h2>
                            <div class="performance-controls">
                                <select id="performanceTimeRange">
                                    <option value="1h">Last Hour</option>
                                    <option value="6h">Last 6 Hours</option>
                                    <option value="24h">Last 24 Hours</option>
                                    <option value="7d">Last 7 Days</option>
                                </select>
                            </div>
                        </div>

                        <div class="performance-grid">
                            <!-- Performance Overview -->
                            <div class="performance-card overview">
                                <div class="card-header">
                                    <h3>Performance Overview</h3>
                                </div>
                                <div class="performance-metrics">
                                    <div class="metric">
                                        <div class="metric-label">Overall Score</div>
                                        <div class="metric-value" id="overallScore">--</div>
                                        <div class="metric-bar">
                                            <div class="metric-progress" id="overallProgress"></div>
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <div class="metric-label">CPU Efficiency</div>
                                        <div class="metric-value" id="cpuEfficiency">--</div>
                                        <div class="metric-bar">
                                            <div class="metric-progress" id="cpuProgress"></div>
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <div class="metric-label">Memory Efficiency</div>
                                        <div class="metric-value" id="memoryEfficiency">--</div>
                                        <div class="metric-bar">
                                            <div class="metric-progress" id="memoryProgress"></div>
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <div class="metric-label">Thermal Efficiency</div>
                                        <div class="metric-value" id="thermalEfficiency">--</div>
                                        <div class="metric-bar">
                                            <div class="metric-progress" id="thermalProgress"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Performance Chart -->
                            <div class="performance-card chart">
                                <div class="card-header">
                                    <h3>Performance Trends</h3>
                                    <div class="chart-controls">
                                        <select id="chartMetric">
                                            <option value="cpu">CPU Usage</option>
                                            <option value="memory">Memory Usage</option>
                                            <option value="temperature">Temperature</option>
                                            <option value="inference">Inference Speed</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="chart-container">
                                    <canvas id="performanceChart"></canvas>
                                </div>
                            </div>

                            <!-- Optimization Recommendations -->
                            <div class="performance-card recommendations">
                                <div class="card-header">
                                    <h3>Optimization Recommendations</h3>
                                    <button class="btn btn-small" id="refreshRecommendations">
                                        <i class="fas fa-sync"></i>
                                        Refresh
                                    </button>
                                </div>
                                <div class="recommendations-list" id="recommendationsList">
                                    <!-- Recommendations will be dynamically populated -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Optimization Tab -->
                <div class="tab-content" id="optimization">
                    <div class="optimization-container">
                        <div class="optimization-header">
                            <h2>Apple Silicon Optimization</h2>
                            <div class="optimization-status" id="autoOptimizationStatus">
                                <div class="toggle-switch" id="autoOptimizationToggle">
                                    <input type="checkbox" id="autoOptimization" checked>
                                    <label for="autoOptimization">Auto Optimization</label>
                                </div>
                            </div>
                        </div>

                        <div class="optimization-grid">
                            <!-- Optimization Settings -->
                            <div class="optimization-card settings">
                                <div class="card-header">
                                    <h3>Optimization Settings</h3>
                                </div>
                                <div class="settings-list">
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <div class="setting-label">Thermal Management</div>
                                            <div class="setting-description">Automatically adjust performance based on temperature</div>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="thermalManagement" checked>
                                            <label for="thermalManagement"></label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <div class="setting-label">Power Management</div>
                                            <div class="setting-description">Optimize for battery life when on battery power</div>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="powerManagement" checked>
                                            <label for="powerManagement"></label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <div class="setting-label">Neural Engine Priority</div>
                                            <div class="setting-description">Prefer Neural Engine for compatible models</div>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="neuralEnginePriority" checked>
                                            <label for="neuralEnginePriority"></label>
                                        </div>
                                    </div>
                                    <div class="setting-item">
                                        <div class="setting-info">
                                            <div class="setting-label">Metal Acceleration</div>
                                            <div class="setting-description">Use Metal Performance Shaders for GPU acceleration</div>
                                        </div>
                                        <div class="toggle-switch">
                                            <input type="checkbox" id="metalAcceleration" checked>
                                            <label for="metalAcceleration"></label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Optimization Actions -->
                            <div class="optimization-card actions">
                                <div class="card-header">
                                    <h3>Optimization Actions</h3>
                                </div>
                                <div class="actions-list">
                                    <button class="action-btn" id="optimizeAllModels">
                                        <div class="action-icon">
                                            <i class="fas fa-magic"></i>
                                        </div>
                                        <div class="action-info">
                                            <div class="action-title">Optimize All Models</div>
                                            <div class="action-description">Apply Apple Silicon optimizations to all loaded models</div>
                                        </div>
                                    </button>
                                    <button class="action-btn" id="clearModelCache">
                                        <div class="action-icon">
                                            <i class="fas fa-trash"></i>
                                        </div>
                                        <div class="action-info">
                                            <div class="action-title">Clear Model Cache</div>
                                            <div class="action-description">Free up memory by clearing unused model cache</div>
                                        </div>
                                    </button>
                                    <button class="action-btn" id="benchmarkSystem">
                                        <div class="action-icon">
                                            <i class="fas fa-tachometer-alt"></i>
                                        </div>
                                        <div class="action-info">
                                            <div class="action-title">Benchmark System</div>
                                            <div class="action-description">Run comprehensive performance benchmarks</div>
                                        </div>
                                    </button>
                                    <button class="action-btn" id="exportSettings">
                                        <div class="action-icon">
                                            <i class="fas fa-download"></i>
                                        </div>
                                        <div class="action-info">
                                            <div class="action-title">Export Settings</div>
                                            <div class="action-description">Export current optimization settings</div>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Loading Overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner">
                <div class="spinner"></div>
                <div class="loading-text">Loading...</div>
            </div>
        </div>

        <!-- Notification System -->
        <div class="notification-container" id="notificationContainer">
            <!-- Notifications will be dynamically added here -->
        </div>
    </div>

    <!-- Scripts -->
    <script src="enhanced_script.js"></script>
</body>
</html>

